<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />

    <title>Forca</title>

    <link rel="stylesheet" href="css/forca.css" />
  </head>

  <body>
    <h2>Jogo da forca<h2>
      <section>
        <p id="palavra" class="palavraOculta"></p>
        <span id="mostraPalavra"></span>
        <p id="mostraFrase" class="mostraPalavra"></p>
      </section>

      <div id="menuJogo" class="menu">
        Nome: <input type="text" id="Nome" placeholder="Digite seu Nome"/>
        <br>
        Dificuldade
        <br>
        <select id='selectDificuldade'>
          <option value="0" >Normal</option>
          <option value="1" >Nunes</option>
        </select>
        <br>
            <button id="btJogar">Jogar</button>
      </div>

      <div id="menuPalpite" class="palpite">
        <input id="campoDaLetra" type="text" placeholder="Digite uma letra!" size=1 maxlength=1>
        <button id="btLetra">Chutar Letra</button>
      </div>

      <div class="placar" id="pontuacao">
        <h3 id="valorPontuacao">Pontuacao:</h3>
      </div>

      <div id="menuTopFive">
        <button id="btTopFive">TOP 5</button>
        <div id="showTopFive"></div>
      </div>

        <script src="http://code.jquery.com/jquery-2.1.4.min.js"></script>
        <script src="jogo.js"></script>
        <script src="util.js"></script>
        <script src="jogador.js"></script>
        <script type="text/javascript">

        //TODO: corrigir ocultação dos menus (onDomReady)
        $('#menuPalpite').hide();
        $('#pontuacao').hide();

        var jogo;
        var jogador;

          atribuirPalavraAleatoria (0);
          $('#btJogar').click(function(){
            var urlUsuarios = 'http://localhost:3000/2';
            var dificuldade = $("#selectDificuldade").val();
            var nomeJogador = $('#Nome').val();
            jogador = new Jogador(nomeJogador);
            jogo = new Jogo(jogador, dificuldade);
            $('#menuJogo').hide();
            $('#menuPalpite').show();
            $('#pontuacao').show();
            var placarTotal = 'Pontuacao '+ jogo.pontuacao
            $('#valorPontuacao').text(placarTotal);
            $('#menuTopFive').hide();
            //console.log(jogo);
            $.post(urlUsuarios,{
              nome: nomeJogador , Dificuldade: dificuldade, pontuacao: 0
            });
          });

          $('#btLetra').click(function(){
            if(jogo.countErros < 6){
              jogo.substituirPosicaoPorLetra($('#campoDaLetra').val());
              $('#campoDaLetra').val('');
              $('#mostraPalavra').html(jogo.espacosPalavra);
              $('#mostraFrase').html(' Erros:' + jogo.countErros);

              if($('#mostraPalavra').html() === jogo.palavra.toLowerCase()){
                jogador.armazenaPalavras($('#mostraPalavra').html());
                jogo.atribuirPalavraAleatoria();
                $('#mostraPalavra').html(substituirPorUnderline($('#palavra').text()));
                jogo.palavra = $('#palavra').text();
                jogo.espacosPalavra = $('#mostraPalavra').html();
              }
            }
            else{
              $('#mostraPalavra').html('Game Over');
            }

            var placarTotal = 'Pontuacao '+ jogo.pontuacao;
            $('#valorPontuacao').text(placarTotal);
          });

          $('#btTopFive').click(function(){
            ordenaTopFive();
          })

        </script>

  </body>

</html>
